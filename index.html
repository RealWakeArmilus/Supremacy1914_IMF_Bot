<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div>
        <h1>Главная</h1>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSX_ofpba4K9Pxwe-TsHBav9ttso19KRqYhOw&s">
        <p>Текст</p>
    </div>

    <form id="dataForm">
        <input type="text" placeholder="Имя" id="user_name">
        <button type="button" id="order">Продолжить</button>
    </form>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // Получаем данные пользователя из initDataUnsafe
        let userData = tg.initDataUnsafe.user || {};
        let userId = userData.id || '';
        let firstName = userData.first_name || '';

        document.getElementById("user_name").value = firstName; // Автозаполнение

        document.getElementById("order").addEventListener("click", function () {
            let name = document.getElementById("user_name").value;

            let data = {
                user_id: userId,
                name: name
            };

            tg.sendData(JSON.stringify(data)); // Отправляем в бота
            tg.close(); // Закрываем WebApp
        });
    </script>

</body>
</html>

